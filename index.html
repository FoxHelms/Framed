<!DOCTYPE html>
<html>
    <script src="variables.js"></script>
    <script>
        function myFunction(){
            //get input
            var entry = document.getElementById("guess").value;
            //entry = entry.replace(/\s/g, '');
            


            //strip entry of 'shot' or 'angle'
            lowerEntry = entry.toLowerCase();
            if(lowerEntry.includes("shot")){
                entry = entry.replace(" shot", '');
            }
            if(lowerEntry.includes("angle")){
                entry = entry.replace(" angle", '');
            }

            if(answer == "extreme close up"){
                if(entry == "ecu"){
                    entry = "extreme close up";
                }
            }

            //const answer = Object.keys(shots)[shotType];
            if(entry == answer){
                alert(entry + " is correct");
                shotType++;
                answer = Object.keys(shots)[shotType];
                fileName = JSON.stringify(answer).replace(/\s/g, '').replace(/['"]+/g, '');
                guesses = 0;
                imgInd = 1;
                document.getElementById("image").src="imgs/" + fileName + imgInd + ".jpg";
                document.getElementById("tryAgain").style="display: none";
            }
            else{
                imgInd++;
                guesses ++;
            }
            if(guesses == 3){
                alert("You have run out of guesses!");
            }
            //show previous image button
            if(guesses != 0){
                for (let i = 1; i < guesses+2; i++) {
                    document.getElementById("img" + i).style="display: ''";
                    document.getElementById("tryAgain").style="display: ''";
                }
            }
            //check if correct, otherwise go to next image
            //update image
            document.getElementById("image").src="imgs/" + fileName + imgInd + ".jpg";
            //reset input field
            document.getElementById("guess").value = "";
            //don't refresh page
            return false;
        }
    </script>
    <body>
        <img width="640" height="480" id="image"/>
        <h1>Name That Shot</h1>

        <button id="img1" style="display: none" onclick="document.getElementById('image').src='imgs/' + fileName + 1 + '.jpg'"></button>
        <button id="img2" style="display: none" onclick="document.getElementById('image').src='imgs/' + fileName + 2 + '.jpg'"></button>
        <button id="img3" style="display: none" onclick="document.getElementById('image').src='imgs/' + fileName + 3 + '.jpg'"></button>

        <h2 id="tryAgain" style="display: none">Wrong! Try Again</h2>
        <form onsubmit="return myFunction();">
            <input type="text" placeholder="Shot Type" id="guess" autocomplete="off"/>
            <input type="submit" value="guess" />
        </form>

        

        <script>
            //use date to choose shot type
            //const date = new Date();
            //let today = date.getDate();
            //let shotOpt = 3;
            //const shotType = today % shotOpt;

            //uncomment below to test shot type selector
            var shotType = 0;

            
            //get answer as HR string from dictionary. 
            var answer = Object.keys(shots)[shotType];
            var fileName = JSON.stringify(answer).replace(/\s/g, '').replace(/['"]+/g, '');
            document.getElementById("image").src="imgs/" + fileName + imgInd + ".jpg";

            //if you don't want to constantiate, use dict like so:
            //var fileName = Object.values(shots)[shotType][guesses];
            //document.getElementById("image").src="imgs/" + fileName;
            
        </script>

    </body>

</html>

